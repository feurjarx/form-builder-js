var FB=function(){function e(e,t){var n,r,a,c=o.querySelector("*");return c?(n=c.cloneNode(!0),r=n.querySelector("* label"),r||(r=document.createElement("label"),n.appendChild(r)),r.childNodes.length?r.childNodes[0].textContent=e:r.textContent=e,a=n.querySelector("* input"),a||(a=n.querySelector("* select")),a?(t.className=a.className,a.parentNode.insertBefore(t,a),a.parentNode.removeChild(a)):n.appendChild(t)):(n=document.createElement("div"),r=document.createElement("label"),r.textContent=e,n.appendChild(r),n.appendChild(t)),n}function t(e){var t,n={},r=n;return a(e.name,function(n,a,c){t=c[a+1]&&"]"===c[a+1]?[]:Object.create({}),a===c.length-1?r instanceof Array?e.selectedOptions instanceof HTMLCollection?[].forEach.call(e.selectedOptions,function(e){r.push(e.value)}):r.push(e.value):r[n]=e.value:r[n]=r[n]||t,r=r[n]}),n}function n(t,r,c){r=r||"",Object.keys(t).forEach(function(l){if(t[l]instanceof Object&&!(t[l]instanceof Array)){var u=r+"["+l+"]";n(t[l],u,c)}else{var i=r+"["+l+"]";i=i.replace("[","").replace("]",""),t[l]instanceof Array&&(i+="[]");var f;if(c){var s;if(t[l]instanceof Array){f=document.createElement("select");var d=document.createElement("option");t[l].forEach(function(e){d.value=e,d.value&&(d.textContent=d.value.replace(/_/g," "),d.textContent=d.textContent[0].toUpperCase()+d.textContent.slice(1)),f.appendChild(d.cloneNode(!0))}),f.value=t[l][0],s="",a(i,function(e,t,n){0===t&&(e=e[0].toUpperCase()+e.slice(1),s+=e.replace(/_/g," ")),t===n.length-1&&(s+=e.replace(/_/g," "))}),s+=": "}else f=document.createElement("input"),f.type="text",f.value=t[l],s=l[0].toUpperCase()+l.slice(1)+": ",s=s.replace(/_/g," ");f.name=i;var p=e(s,f);o.appendChild(p)}else f=o.querySelector('[name="'+i+'"]'),f?t[l]instanceof Array&&"SELECT"===f.tagName&&f.multiple?[].forEach.call(f.options,function(e){e.selected=-1!==t[l].indexOf(e.value)}):f.value=t[l]:console.error('Field with name is "'+i+'" not found.')}})}function r(){var e=o.querySelectorAll("[name]");[].forEach.call(e,function(e){e.value=null})}function a(e,t){var n=e.split("[");n.forEach(function(e,r){t(e.replace("]",""),r,n)})}function c(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];if(n)for(var r in n)n.hasOwnProperty(r)&&("object"!=typeof n[r]||n[r]instanceof Array?e[r]instanceof Array&&n[r]instanceof Array?e[r]=e[r].concat(n[r]):e[r]=n[r]:e[r]=c(e[r],n[r]))}return e}var o;return{make:function(e,a){return o=document.querySelector(e),a=a||[],a.forEach(function(e){var t=o.querySelectorAll(e.selector);[].forEach.call(t,function(t){Object.defineProperty(t,"value",{get:e.getter,set:e.setter,configurable:!0})})}),{form:o,create:function(e){n(e,null,!0)},get data(){var e=o.querySelectorAll("[name]"),n={};return[].forEach.call(e,function(e){n=c(n,t(e))}),n},readDataByFieldName:function(e){var n=o.querySelector('[name="'+e+'"]');return t(n)},readDataByFieldSelector:function(e){var n=o.querySelectorAll(e),r={};return[].forEach.call(n,function(e){r=c(r,t(e))}),r},set data(e){if(!e)throw new Error("Bad data.");n(e)},clear:function(){r()}}}}}();
